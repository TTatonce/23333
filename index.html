<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>标签系统</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        *{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif}
        body{background:linear-gradient(135deg,#1a1a2e 0%,#16213e 100%);min-height:100vh;padding:20px;display:flex;justify-content:center;align-items:flex-start}
        .container{width:100%;max-width:900px;background:#0f3460;border-radius:15px;box-shadow:0 10px 30px rgba(0,0,0,0.5);overflow:hidden;border:1px solid #2d4059}
        header{background:linear-gradient(90deg,#2d4059 0%,#1a1a2e 100%);color:#e94560;padding:20px 25px;display:flex;justify-content:space-between;align-items:center;border-bottom:2px solid #e94560;position:relative}
        .header-left{display:flex;align-items:center;gap:15px}
        .avatar{width:50px;height:50px;border-radius:50%;border:2px solid #e94560;box-shadow:0 0 10px rgba(233,69,96,0.3);overflow:hidden;background:#16213e;position:relative}
        .avatar::before{content:'';position:absolute;top:-2px;left:-2px;right:-2px;bottom:-2px;background:linear-gradient(45deg,#e94560,#533483);border-radius:50%;z-index:-1}
        .avatar img{width:100%;height:100%;object-fit:cover;border-radius:50%}
        .avatar-placeholder{color:#e94560;font-size:20px;display:flex;align-items:center;justify-content:center;height:100%}
        .title-section h1{font-size:1.6rem;margin-bottom:5px;text-shadow:0 0 10px rgba(233,69,96,0.5);letter-spacing:1px}
        .title-section p{font-size:0.8rem;color:#b8b8b8}
        .main-content{padding:20px;background:#0f3460}
        .file-info{margin-bottom:15px;padding:12px;background:rgba(45,64,89,0.5);border-radius:8px;font-size:0.8rem;color:#b8b8b8;border-left:3px solid #e94560}
        .file-info h3{margin-bottom:6px;color:#e94560;display:flex;align-items:center;gap:8px;font-size:0.9rem}
        .tags-container{display:flex;flex-wrap:wrap;gap:8px;margin-top:15px}
        .tag{color:white;padding:6px 12px;border-radius:4px;display:flex;align-items:center;gap:6px;font-size:0.8rem;animation:fadeIn 0.3s;border:1px solid rgba(255,255,255,0.1);transition:all 0.2s;max-width:200px;position:relative;overflow:hidden;font-weight:500;text-shadow:0 1px 2px rgba(0,0,0,0.5);cursor:pointer}
        .tag::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(255,255,255,0.05)}
        .tag:hover{transform:translateY(-2px);box-shadow:0 4px 8px rgba(0,0,0,0.3)}
        .empty-state{text-align:center;padding:30px 20px;color:#b8b8b8}
        .empty-state i{font-size:3rem;margin-bottom:10px;color:#533483}
        .empty-state h3{font-size:1.1rem;margin-bottom:8px;color:#e94560}
        .empty-state p{font-size:0.85rem}
        .stats{display:flex;justify-content:space-between;margin-top:20px;padding:12px;background:rgba(45,64,89,0.5);border-radius:8px;font-size:0.8rem;color:#b8b8b8;border:1px solid #2d4059}
        .tag-category{margin-top:20px}
        .category-title{font-size:1rem;margin-bottom:10px;color:#e94560;display:flex;align-items:center;gap:8px;text-shadow:0 0 5px rgba(233,69,96,0.3)}
        .category-title i{font-size:1.2rem}
        .tag-meaning-container{display:none;margin-top:20px;padding:15px;background:rgba(45,64,89,0.7);border-radius:8px;border-left:3px solid #e94560}
        .tag-meaning-title{font-size:1rem;margin-bottom:10px;color:#e94560;display:flex;align-items:center;gap:8px}
        .tag-meaning-content{color:#b8b8b8;font-size:0.9rem;line-height:1.5}
        .accent-line{height:3px;background:linear-gradient(90deg,transparent,#e94560,transparent);margin:10px 0}
        @keyframes fadeIn{from{opacity:0;transform:translateY(5px) scale(0.95)}to{opacity:1;transform:translateY(0) scale(1)}}
        @media (max-width:600px){header{flex-direction:column;gap:12px;text-align:center}.header-left{flex-direction:column}}
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-left">
                <div class="avatar" id="avatarContainer">
                    <div class="avatar-placeholder">
                        <i class="fas fa-ghost"></i>
                    </div>
                </div>
                <div class="title-section">
                    <h1>标签系统</h1>
                    <p>从文件加载标签</p>
                </div>
            </div>
        </header>
        <div class="main-content">
            <div class="file-info">
                <h3><i class="fas fa-file-alt"></i> 标签来源</h3>
                <p>系统已从 <code>标签.txt</code> 文件加载标签</p>
            </div>
            <div class="accent-line"></div>
            <div class="tag-meaning-container" id="tagMeaningContainer">
                <div class="tag-meaning-title">
                    <i class="fas fa-info-circle"></i>
                    <span id="tagMeaningTitle">标签含义</span>
                </div>
                <div class="tag-meaning-content" id="tagMeaningContent"></div>
            </div>
            <div class="tag-category">
                <div class="category-title">
                    <i class="fas fa-tags"></i>
                    <span>所有标签</span>
                </div>
                <div class="tags-container" id="tagsContainer"></div>
            </div>
            <div class="empty-state" id="emptyState">
                <i class="fas fa-cloud-moon"></i>
                <h3>暂无标签</h3>
                <p>请确保标签文件存在且格式正确</p>
            </div>
            <div class="stats">
                <div>总标签数: <span id="totalTags">0</span></div>
                <div>当前显示: <span id="displayedTags">0</span></div>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const tagsContainer = document.getElementById('tagsContainer');
            const emptyState = document.getElementById('emptyState');
            const totalTags = document.getElementById('totalTags');
            const displayedTags = document.getElementById('displayedTags');
            const avatarContainer = document.getElementById('avatarContainer');
            const tagMeaningContainer = document.getElementById('tagMeaningContainer');
            const tagMeaningTitle = document.getElementById('tagMeaningTitle');
            const tagMeaningContent = document.getElementById('tagMeaningContent');
            
            const colorPalettes = [
                'linear-gradient(135deg, #2d4059 0%, #1a1a2e 100%)',
                'linear-gradient(135deg, #533483 0%, #1a1a2e 100%)',
                'linear-gradient(135deg, #e94560 0%, #533483 100%)',
                'linear-gradient(135deg, #16213e 0%, #0f3460 100%)',
                'linear-gradient(135deg, #2d4059 0%, #e94560 100%)',
                'linear-gradient(135deg, #533483 0%, #e94560 100%)',
                'linear-gradient(135deg, #1a1a2e 0%, #2d4059 100%)',
                'linear-gradient(135deg, #0f3460 0%, #533483 100%)'
            ];
            
            let tags = [];
            let tagColors = {};
            let tagMeanings = {};
            
            function getRandomColor() {
                return colorPalettes[Math.floor(Math.random() * colorPalettes.length)];
            }
            
            function updateStats() {
                totalTags.textContent = tags.length;
                displayedTags.textContent = document.querySelectorAll('.tag').length;
            }
            
            function displayTags() {
                if (tags.length === 0) {
                    tagsContainer.style.display = 'none';
                    emptyState.style.display = 'block';
                } else {
                    tagsContainer.style.display = 'flex';
                    emptyState.style.display = 'none';
                    tagsContainer.innerHTML = '';
                    
                    tags.forEach(tag => {
                        const tagElement = document.createElement('div');
                        tagElement.className = 'tag';
                        
                        if (!tagColors[tag]) {
                            tagColors[tag] = getRandomColor();
                        }
                        
                        tagElement.style.background = tagColors[tag];
                        tagElement.textContent = tag;
                        
                        tagElement.addEventListener('click', () => {
                            showTagMeaning(tag);
                        });
                        
                        tagsContainer.appendChild(tagElement);
                    });
                }
                
                updateStats();
            }
            
            function showTagMeaning(tag) {
                if (tagMeanings[tag]) {
                    tagMeaningTitle.textContent = `${tag} 的含义`;
                    tagMeaningContent.textContent = tagMeanings[tag];
                    tagMeaningContainer.style.display = 'block';
                } else {
                    tagMeaningTitle.textContent = `${tag} 的含义`;
                    tagMeaningContent.textContent = '该标签暂无详细解释';
                    tagMeaningContainer.style.display = 'block';
                }
            }
            
            function loadAvatar() {
                const img = document.createElement('img');
                img.onload = function() {
                    avatarContainer.innerHTML = '';
                    avatarContainer.appendChild(img);
                };
                img.onerror = function() {
                    avatarContainer.innerHTML = '<div class="avatar-placeholder"><i class="fas fa-ghost"></i></div>';
                };
                img.src = '壁纸.jpg';
            }
            
            function loadTagsFromFile() {
                fetch('标签.txt')
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('文件不存在或无法访问');
                        }
                        return response.text();
                    })
                    .then(data => {
                        // 解析标签文件
                        parseTagFile(data);
                        displayTags();
                        console.log('标签已从文件加载完成');
                    })
                    .catch(error => {
                        console.error('加载标签文件失败:', error);
                        tags = [];
                        tagColors = {};
                        tagMeanings = {};
                        displayTags();
                    });
            }
            
            function parseTagFile(data) {
                tags = [];
                tagMeanings = {};
                
                // 按行分割文件内容
                const lines = data.split('\n').filter(line => line.trim() !== '');
                
                lines.forEach(line => {
                    // 检查是否是标签定义行（包含冒号）
                    if (line.includes('：') || line.includes(':')) {
                        const separator = line.includes('：') ? '：' : ':';
                        const parts = line.split(separator);
                        
                        if (parts.length >= 2) {
                            const tag = parts[0].trim();
                            const meaning = parts.slice(1).join(separator).trim();
                            
                            tags.push(tag);
                            tagMeanings[tag] = meaning;
                        }
                    } else {
                        // 如果没有冒号，则视为简单标签
                        const tag = line.trim();
                        if (tag) {
                            tags.push(tag);
                        }
                    }
                });
            }
            
            // 初始化
            loadAvatar();
            loadTagsFromFile();
        });
    </script>
</body>
</html>